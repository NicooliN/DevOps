# Basic CI/CD

Разработка простого **CI/CD** для проекта *SimpleBashUtils*. Сборка, тестирование, развертывание.

## Contents

1. [Chapter I](#chapter-i) \
   1.1. [Настройка gitlab-runner](#part-1-настройка-gitlab-runner)  
   1.2. [Сборка](#part-2-сборка)  
   1.3. [Тест кодстайла](#part-3-тест-кодстайла)   
   1.4. [Интеграционные тесты](#part-4-интеграционные-тесты)  
   1.5. [Этап деплоя](#part-5-этап-деплоя)  
   1.6. [Дополнительно. Уведомления](#part-6-дополнительно-уведомления)
4. [Chapter IV](#chapter-iv)


## Chapter I

В качестве результата работы ты должен сохранить два дампа образов виртуальных машин, описанных далее. 


### Part 1. Настройка **gitlab-runner**


##### Подними виртуальную машину *Ubuntu Server 22.04 LTS*, скачай и установи на виртуальную машину gitlab-runner.
![cicd](img/1.png)<br>

##### Запусти **gitlab-runner** и зарегистрируй его для использования в текущем проекте (*DO6_CICD*).
![cicd](img/2.png)<br>
![cicd](img/3.png)<br>

### Part 2. Сборка

##### В файле _gitlab-ci.yml_ добавь этап запуска сборки через мейк файл из проекта _C2_.
![cicd](img/4.png)<br>

##### Файлы, полученные после сборки (артефакты), сохрани в произвольную директорию со сроком хранения 30 дней.
![cicd](img/5.png)<br>

### Part 3. Тест кодстайла

#### Напиши этап для **CI**, который запускает скрипт кодстайла (*clang-format*).
![cicd](img/6.0.png)
![cicd](img/6.1.png)<br>

##### В пайплайне отобрази вывод утилиты *clang-format*.
![cicd](img/7.png)<br>


### Part 4. Интеграционные тесты

#### Напиши этап для **CI**, который запускает твои интеграционные тесты из того же проекта.
![cicd](img/6.0.png)
![cicd](img/8.png)

##### В пайплайне отобрази вывод, что интеграционные тесты успешно прошли / провалились.
![cicd](img/9.png)

### Part 5. Этап деплоя

##### Подними вторую виртуальную машину *Ubuntu Server 22.04 LTS*.
![cicd](img/10.png)

#### Напиши этап для **CD**, который «разворачивает» проект на другой виртуальной машине. В файле _gitlab-ci.yml_ добавь этап запуска написанного скрипта.

![cicd](img/11.png)

##### Напиши bash-скрипт, который при помощи **ssh** и **scp** копирует файлы, полученные после сборки (артефакты), в директорию */usr/local/bin* второй виртуальной машины.
![cicd](img/12.png)

##### Результат.
![cicd](img/121.png)

### Part 6. Дополнительно. Уведомления

##### Настрой уведомления об успешном/неуспешном выполнении пайплайна через бота  в *Telegram*.

##### sh скрипт отправки в Телеграм.
![cicd](img/13.png)

##### Настройка .gitlab-ci.yml.
![cicd](img/14.png)

##### Вывод сообщений в телеграмме
![cicd](img/15.png)